<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<style type="text/css">
		@import url(http://fonts.googleapis.com/css?family=Oswald);
		
		html {
			background: #eee;
			font-family: Verdana, sans-serif;
			font-size: 14px;
			margin: 0;
			padding: 0;
		}
		
		h1, h2, h3, h4, h5, h6 {
			font-family: Oswald, Verdana, sans-serif;
		}
		
		body {
			margin: 0 auto;
			padding: 20px;
			width: 750px;
		}
		
		div {
			background: white;
			border: 3px solid #db36a4;
			border-top: none;
			border-radius: 0 0 10px 10px;
			padding: 10px
		}
		
		h1 {
			background: #cb60b3;
			background: -moz-linear-gradient(top, #cb60b3 0%, #c146a1 50%, #a80077 51%, #db36a4 100%);
			background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#cb60b3), color-stop(50%,#c146a1), color-stop(51%,#a80077), color-stop(100%,#db36a4));
			background: -webkit-linear-gradient(top, #cb60b3 0%,#c146a1 50%,#a80077 51%,#db36a4 100%);
			background: -o-linear-gradient(top, #cb60b3 0%,#c146a1 50%,#a80077 51%,#db36a4 100%);
			background: -ms-linear-gradient(top, #cb60b3 0%,#c146a1 50%,#a80077 51%,#db36a4 100%);
			background: linear-gradient(to bottom, #cb60b3 0%,#c146a1 50%,#a80077 51%,#db36a4 100%);
			filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#cb60b3', endColorstr='#db36a4',GradientType=0 );
			border-radius: 10px 10px 0 0;
			color: white;
			margin: 50px 0 0;
			padding: 5px 10px;
		}
		
		pre {
			background: #eee;
			padding: 10px;
		}
		
		p {
			margin: 0;
			line-height: 1.5em;
		}
	</style>
	<title>PVG</title>
</head>

<body>
	<h1>Installation</h1>
	<div>
		<h2>Systemkrav</h2>
		<ul>
			<li>En dator</li>
			<li>Java Runtime</li>
		</ul>
		<h2>Formatering av filer</h2>
		<p>Filerna är formaterade som CSV med semikolon som separator. Exempel på en fil med deltagare:</p>
		<pre>
StartNo; Namn
1; Anders Andersson
2; Bengt Bengtsson
</pre>
	</div>
	<h1>Registrering</h1>
	<div>
		<p>Registreringsprogrammet används för att registrera deltagares start- och måltider. Tiderna lagras i separata filer (<code>start.txt</code> respektive <code>finish.txt</code>) i hemkatalogen för senare bearbetning.</p>
		<h2>Starta programmet</h2>
		<p>Dubbelklicka på programfilen (<code>EnduroRegister.jar</code>). Ett fönster visas som låter användaren välja mellan att registrera start- eller måltider.</p>
		<p>När ett av alternativen väljs ändras programmets gränssnitt till att ett som låter användaren mata in tider och startnummer. Detta beskrivs nedan. För att byta läge måste programmet startas om.</p>
		<img src="bilder/setupframe.png" />
		<h2>Registrering av tider</h2>
		<p>Gränssnittet består av ett fält för att mata in startnummer och en knapp för att registrera tiden. Underst i fönstret visas ett statusfält med information om de senast sparade tiderna. Gränssnittet fungerar likadant för att registrera start- och måltider.</p>
		<figure>
			<img src="bilder/starttider.png" />
			<figcaption><p><i>Deltagare 2 har registrerats vid tidpunkten 21.53.10. Deltagare 4 håller på att registreras.</i></p></figcaption>
		</figure>
		<p>Fyll i förarens startnummer i fältet och välj Registrera. Även enter-tangenten kan användas. Den registrerade tiden syns i det nedre fältet.</p>
		<p>Flera startnummer kan anges separerade med kommatecken, eller som ett intervall (ex. 1-5). Alla dessa kommer då att registreras vid samma tidpunkt.</p>
		<p>Om användaren klickar på Registrera utan att ange ett startnummer så stoppas klockan och programmet frågar sedan efter ett startnummer. Detta kan utnyttjas för att registrera målgången av en förare med oläsligt startnummer.</p>
		<figure>
		  <img src="bilder/start-sen.png" />
		  <figcaption><p><i>Deltagare 2 och 4 har registrerats. Systemet väntar på ett nytt startnummer som kommer att registreras med tidpunkten 21.53.26.</i></p></figcaption>
		</figure>
		<h2>Spara tider</h2>
		<p>Tiderna sparas kontinuerligt under programmets användning och behöver inte sparas manuellt.</p>
		<h2>Avsluta programmet</h2>
		<p>För att avsluta programmet behöver man bara stänga ner fönstret.</p>
	</div>
	<h1>Sortering av resultat</h1>
	<div>
		<p>Sortering av resultatet görs av ett separat program. Resultatet sparas sorterat efter både startnummer och placering i separata filer som anges i konfigurationen, se nedan.</p>
		<h2>Starta programmet</h2>
		<p>Dubbelklicka på programfilen (<code>EnduroSorter.jar</code>). Sorteringsprogrammet är inte interaktivt och avslutas direkt med ett meddelande om sorteringen lyckades eller inte. Alla inställningar görs i konfigurationsfilen som beskrivs närmare under Konfiguration nedan.
		<h2>Resultat</h2>
		<p>Programmet läser in start- och måltider och namn från filer som angivits i konfigurationen. Om en totaltid inte kan beräknas för att antingen start- eller måltid saknas skrivs istället --.--.-- ut.</p>
		<p>Om en starttid eller sluttid saknas så skrivs istället <code>Start?</code> respektive <code>Slut?</code> ut. Då flera start- eller måltider registrerats så skrivs en notering ut tillsammans med alla överflödiga registeringar på formen <code>Flera starttider? 12.12.00 12.13.30</code>. Om en totaltid anses vara orimlig skrivs <code>Omöjlig Totaltid?</code> ut.</p>
		<h2>Konfiguration</h2>
		<p>Sorteringsprogrammet konfigureras med hjälp av filen <code>sorter.cfg</code> placerad i hemkatalogen. Filen består av ett antal tilldelningssatser, en per rad, där en inställning tilldelas ett värde. Ett exempel som tilldelar NumberOfLaps värdet 1:
		  <pre>NumberOfLaps=1</pre>
Rader som inleds med ett brädgårdstecken (#) betraktas som kommentarer och ignoreras av sorteringsprogrammet. Alla filnamn anges relativt från användarens hemkatalog.
		  <h3>Inställningsvärden</h3>
		  <dl>
		    <dt>Namefile</dt>
		    <dd>Fil som innehåller deltagares namn och startnummer</dd>
		    <dt>StartFiles</dt>
		    <dd>Lista över filer med starttider, separerade av mellanslag (TODO: kolla).</dd>
		    <dt>FinishFiles</dt>
		    <dd>Lista över filer med måltider, separerade av mellanslag (TODO: kolla).</dd>
		    <dt>ResultFile</dt>
		    <dd>Fil att skriva startnummerordnade resultat till.</dd>
		    <dt>SortedResultFile</dt>
		    <dd>Fil att skriva placeringsordnade resultat till.</dd>
		    <dt>NumberOfLaps</dt>
		    <dd>Antal varv att skriva ut i resultatfilen då varvlopp körs.</dd>
		    <dt>TimeStartIsOpen</dt>
		    <dd>Lägsta tillåtna totaltiden då varvlopp körs. Deltagare med lägre totaltid får ingen placering vid sorteringen.</dd>
		  </dl>
	</div>
</body>
</html>
